{% extends "baselayout.html" %}
{% load i18n %}

{% block content %}
    {# Translators: Header1 #}
    <h1>{% blocktrans %}Interpreter Feedback Summary{% endblocktrans %}</h1>
    
    {% if perms.feedback.view_interpreterfeedback %}
    {# Translators:  #}
    <p>{% blocktrans %}A list of signs that have at least one Interpreter Note{% endblocktrans %}</p>
    
    <table>
      {% regroup notes by gloss as glosses %}
      
      {% for gloss in glosses %}
      <tr>
        <td><a href="{% url 'dictionary:admin_gloss_view' pk=gloss.grouper.id %}">{{gloss.grouper.idgloss}}</a></td>
      </tr>

      {% endfor %}      
    </table>
    
    
    {# Translators: Header3 #}
    <h3>{% blocktrans %}General Feedback{% endblocktrans %}</h3>
  
    {% for fb in general %}
      <div class="panel-group" id="general{fb.id}">
        <div class="panel panel-default">
          <div class="panel-heading">
            {# Translators: Header4 view? #}
            <h4 class="panel-title">
                {{fb.date|date:"d M Y"}}: {{fb.user.first_name}} {{fb.user.last_name}} |
              <a data-toggle="collapse" data-parent="#signfb{{fb.id}}" href="#gencollapse{{fb.id}}">
                 {% blocktrans %}View{% endblocktrans %}
              </a>
            </h4> 
          </div>
          <div id="gencollapse{{fb.id}}" class="panel-collapse collapse">
  
          {% if fb.video %}  
          <div class="videocontainer">
             <video width=400 controls="controls" src='{{ MEDIA_URL }}{{ fb.video }}'></video>
          </div>
          {% endif %}
      
  	    <p>{{fb.comment}}</p>
     
         <p><form action="/feedback/general/delete/{{fb.id}}" method="post">
             {% csrf_token %}
             {# Translators:  Submit button #}
             <input class='delete btn btn-default' type='submit' value='{% blocktrans %}Delete Comment{% endblocktrans %}'>
             </form>
           </p>
         </div> 
        </div>
       </div>
    {% empty %}
    {# Translators:  #}
    <p>{% blocktrans %}No general feedback posted{% endblocktrans %}</p>
    {% endfor %} 

    {# Translators: Header3 #}
    <h3>{% blocktrans %}Sign Feedback{% endblocktrans %}</h3>
  
    {% for fb in signfb %} 
      <div class="panel-group" id="sign{fb.id}">
        <div class="panel panel-default">
          <div class="panel-heading">
            {# Translators: Header4 view? #}
            <h4 class="panel-title">
                {{fb.date|date:"d M Y"}}: {{fb.user.first_name}} {{fb.user.last_name}} |
              <a data-toggle="collapse" data-parent="#signfb{{fb.id}}" href="#signcollapse{{fb.id}}">
                 {% blocktrans %}View{% endblocktrans %}
              </a>
            </h4> 
          </div>
          <div id="signcollapse{{fb.id}}" class="panel-collapse collapse">
          {# Translators:  #}
          <p><strong>{% blocktrans %}Sign:{% endblocktrans %}</strong> <a href="{% url 'root_page' %}dictionary/gloss/{{fb.translation.gloss.idgloss}}.html">{{fb.translation.gloss.idgloss}}</a></p>
          {# Translators:  #}
          <p><strong>{% blocktrans %}Comment:{% endblocktrans %}</strong> {{fb.comment}}</p>
          {# Translators:  #}
          <p><strong>{% blocktrans %}Don't Belong:{% endblocktrans %}</strong> {{fb.kwnotbelong}}</p>
          <!--
          <ul>  
      	<li>Auslan Sign: {{fb.get_isAuslan_display}}</li>
      	<li>Where Used: {{fb.get_whereused_display}}</li>
      	<li>Liked: {{fb.get_like_display}}</li>
      	<li>Used: {{fb.get_use_display}}</li>
      	<li>Use Suggested: {{fb.get_suggested_display}}</li>
      	<li>Correct: {{fb.get_correct_display}}</li>
        
          </ul>
          -->      
          <p><form action="/feedback/sign/delete/{{fb.id}}" method="post">
             {% csrf_token %}
             {# Translators: Submit button #}
             <input class='delete btn btn-default' type='submit' value='{% blocktrans %}Delete Comment{% endblocktrans %}'>
             </form>
           </p>     
     
          </div> 
         </div>
       </div>
    {% empty %}
    {# Translators:  #}
    <p>{% blocktrans %}No feedback posted{% endblocktrans %}</p>
    {% endfor %}

    {# Translators: Header3 #}
    <h3>{% blocktrans %}Missing Sign Feedback{% endblocktrans %}</h3>
    {% for fb in missing %} 
    
      <div class="panel-group" id="missing{fb.id}">
        <div class="panel panel-default">
          <div class="panel-heading">
            {# Translators: Header4 view? #}
            <h4 class="panel-title">
                {{fb.date|date:"d M Y"}}: {{fb.user.first_name}} {{fb.user.last_name}} |
              <a data-toggle="collapse" data-parent="#missing{{fb.id}}" href="#missingcollapse{{fb.id}}">
                 {% blocktrans %}View{% endblocktrans %}
              </a>
            </h4> 
          </div>
          <div id="missingcollapse{{fb.id}}" class="panel-collapse collapse">

          {# Translators:  #}
          <p>{% blocktrans %}Email:{% endblocktrans %} <a href="mailto:{{fb.user.email}}">{{fb.user.email}}</a></p>
          {% if fb.video %}  
           <div class="videocontainer">
              <video width=400 controls="controls" src='{{ MEDIA_URL }}{{ fb.video }}'>
              </video>
              {# Translators:  #}
              <p><a href='{{ MEDIA_URL }}{{ fb.video }}'>{% blocktrans trimmed %}Download video</a><br>
                  (if video does not play here you may be able to play by downloading){% endblocktrans %}</p>
           </div>
          {% endif %}
    
           <dl class='dl-horizontal'>
               {# Translators:  #}
               <dt>{% blocktrans %}Handform{% endblocktrans %}</dt><dd>{{fb.get_handform_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Handshape{% endblocktrans %}</dt><dd>{{fb.get_handshape_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Alternate Handshape{% endblocktrans %}</dt><dd>{{fb.get_althandshape_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Location{% endblocktrans %}</dt><dd>{{fb.get_location_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Relative Location{% endblocktrans %}</dt><dd>{{fb.get_relativelocation_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Hand Body Contact{% endblocktrans %}</dt><dd>{{fb.get_handbodycontact_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Hand Interaction{% endblocktrans %}</dt><dd>{{fb.get_handinteraction_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Direction{% endblocktrans %}</dt><dd>{{fb.get_direction_display}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Movement Type{% endblocktrans %}</dt><dd>{{fb.movementtype}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Small Movement{% endblocktrans %}</dt><dd>{{fb.smallmovement}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Repetition{% endblocktrans %}</dt><dd>{{fb.repetition}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Meaning{% endblocktrans %}</dt><dd>{{fb.meaning}}</dd>
                {# Translators:  #}
               <dt>{% blocktrans %}Comments{% endblocktrans %}</dt><dd>{{fb.comments}}</dd>
           </dl>
     
           <p><form action="/feedback/missingsign/delete/{{fb.id}}" method="post">
             {% csrf_token %}
             {# Translators: Submit button #}
             <input class='delete btn btn-default' type='submit' value='{% blocktrans %}Delete Comment{% endblocktrans %}'>
             </form>
           </p>
 
        </div>
       </div>
      </div>

    {% empty %}
     {# Translators:  #}
     <p>{% blocktrans %}No feedback posted{% endblocktrans %}</p>
    {% endfor %} 
    
    
    
    
    {% else %}
    {# Translators:  #}
    <p>{% blocktrans %}You do not have permission to view this page{% endblocktrans %}</p>
    
    {% endif %}


{% endblock %}