{% load i18n %}

<nav id='navbar' class="navbar navbar-default" role="navigation">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            {# Translators: Button to toggle navigation #}
            <span class="sr-only">{% blocktrans %}Toggle navigation{% endblocktrans %}</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

        <ul class="nav navbar-nav">
            {# add in the top level menu items from pages #}
            {% for item in menu %}
            {# Do nothing if item.url is admin and user not is_staff #}
            {% if item.url == "/admin/" and not request.user.is_staff %}
            {% else %}
            {% if item.children %}
            <li class='dropdown'>
                <a href="{{item.url}}" class="dropdown-toggle" data-toggle="dropdown">{{item.title}} <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    {% for subitem in item.children %}
                    <li {% if subitem.current %}class='active' {% endif %}><a
                            href="{{subitem.url}}">{{subitem.title}}</a></li>
                    {% endfor %}
                </ul>
            </li>
            {% else %}
            <li><a href="{{item.url}}">{{item.title}}</a></li>
            {% endif %}
            {% endif %}
            {% endfor %}
        </ul>

        <form class="navbar-form navbar-right" role="search" id="frmSearch" name="frmSearch" method="get"
              action="/dictionary/search/">

            <div class="form-group">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                {# Translators: Placeholder text in a search textfield #}
                <input class='form-control' placeholder='{% blocktrans %}Search gloss{% endblocktrans %}' type="text"
                       name="glossQuery" value="{{ glossQuery }}" maxlength="50">
            </div>
            <div class="form-group">
                {# Translators: Placeholder text in a search textfield #}
                <input class='form-control' placeholder='{% blocktrans %}Search translation{% endblocktrans %}'
                       type="text" name="query" value="{{ query }}" maxlength="50">
            </div>
            {# Translators: Submit button (press to search) #}
            <button type="submit" class="btn btn-default">{% blocktrans %}Search{% endblocktrans %}</button>
        </form>
    </div>
    <!-- /.navbar-collapse -->
</nav>

